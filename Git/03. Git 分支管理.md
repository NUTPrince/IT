# 分支介绍

>我们初始化Git仓库的时候，Git会默认创建一个名为 "`main`" 的主分支。在实际工作中，**主分支要求是一个稳定、健壮、安全的主线**，一般不允许在主分支上直接进行开发，而是拉取一个新的分支，开发、测试完成后，再将分支合并到主分支上。

![[g-7.png]]

分支是Git的杀手级特征，而且Git鼓励在工作流程中频繁使用分支与合并，哪怕一天之内进行许多次都没有关系。因为Git分支非常轻量级，不像其他的版本控制，创建分支意味着要把项目完整的拷贝一份，而Git创建分支是在瞬间完成的，而与你工程的复杂程度无关。

# 本地分支操作

## 1.查看分支列表

查看当前Git仓库中所有的分支列表

```shell
git branch
```

显示：
```shell
* main
```
**注:分支前面的 "`*`" 表示当前所处的分支，使用HEAD指向。**

![[g-8.png]]

## 2.创建新分支

使用 `git branch [分支名]` 命令，可以基于当前分支，创建一个新的分支，此时，新分支中的代码和当前分支完全一样

例如：
```shell
git branch dev
```
创建分支后，此时用户当前所在的地方，还是 “`main`” 分支（HEAD指向）。

![[g-9.png]]

可以查看当前Git仓库中所有的分支列表:
```shell
git branch
```

显示：
```shell
  dev
* main
```
**注:分支前面的 "`*`" 表示当前所处的分支，使用HEAD指向。**

## 3.切换分支

使用 `git switch [分支名]` 命令，可以切换到指定的分支上进行开发

```shell
git switch dev
```

![[g-10.png]]

可再次查看当前Git仓库中所有的分支列表:
```shell
git branch
```

显示：
```shell
* dev
  main
```
**注:分支前面的 "`*`" 表示当前所处的分支，使用HEAD指向。**

## 4.分支的快速创建与切换

创建指定名称的新分支，并立即切换到新分支上,可使用 “`git switch -c <name>`” 命令

```shell
git switch -c dev
```

## 5.合并分子

功能分支的代码开发测试完毕之后，将完成后的代码合并到 “`main`” 主分支上

先从分支上切换回主分支：
```shell
git switch main
```

![[g-11.png]]

在  "`main`"  主分支上运行 `git merge [分支名]` 命令，将分支的代码合并到主分支:
```shell
git merge dev
```

![[g-12.png]]

## 6.删除分支

合并完分支后，可删除 `dev` 分支,使用 `git branch -d [分支名称]` 命令

```shell
git branch -d dev
```
注：删除 `dev` 分支，其实是把 `dev` 指针给删掉。

![[g-13.png]]

## 7.遇到冲突时的分支合并

如果在两个不同的分支中，若对同一个文件进行了不同的修改，再使用合并命令：
`  git switch main `、   `  git merge dev  `，则会提示冲突。

![[g-14.png]]
Git无法智能的自动合并它们。因此我们需要打开这些包含冲突的文件，然后手动解决冲突。

打开冲突文件：
![[g-15.png]]
注：Git用`<<<<<<<`，`=======`，`>>>>>>>`标记出不同分支的内容，我们修改冲突的地方后保存。

解决后，重新提交和合并：
```shell
git add . 
```

```shell
git commit -m "conflict fixed"
```

```shell
git merge dev
```

![[g-16.png]]

这样就成功解决了合并中的冲突，并提交了结果，大功告成！