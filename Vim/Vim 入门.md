# 什么是 vim？

Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

简单的来说，Vi 是 Visual 的首字母缩写。它是最初为 UNIX 创建的面向屏幕的文本编辑器。Vi 的原始代码由 Bill Joy 于1976年编写，并首次在 BSD 平台上发布。

# vim 的 6 种基本模式

1. 普通模式(Normal mode)

在普通模式中，用的编辑器命令，比如移动光标，删除文本等等。这也是 Vim 启动后的默认模式。这正好和许多新用户期待的操作方式相反（大多数编辑器默认模式为插入模式）。

在普通模式中，有很多方法可以进入插入模式。比较普通的方式是按 `a`（append／追加）键或者 `i`（insert／插入）键。

2. 插入模式(Insert mode)

在这个模式中，大多数按键都会向文本缓冲中插入文本。大多数新用户希望文本编辑器编辑过程中一直保持这个模式。

 在插入模式中，可以按 `ESC` 键回到普通模式。

3. 可视模式(Visual mode)

这个模式与普通模式比较相似。但是移动命令会扩大高亮的文本区域。高亮区域可以是字符、行或者是一块文本。当执行一个非移动命令时，命令会被执行到这块高亮的区域上。Vim 的"文本对象"也能和移动命令一样用在这个模式中。

4. 选择模式(Select mode)

这个模式和无模式编辑器的行为比较相似（Windows 标准文本控件的方式）。这个模式中，可以用鼠标或者光标键高亮选择文本，不过输入任何字符的话，Vim 会用这个字符替换选择的高亮文本块，并且自动进入插入模式。

5. 命令行模式(Command line mode)

在命令行模式中可以输入会被解释成并执行的文本。例如执行命令（`:`键），搜索（`/`和`?`键）或者过滤命令（`!`键）。在命令执行之后，Vim 返回到命令行模式之前的模式，通常是普通模式。

6. Ex 模式(Ex mode)

这和命令行模式比较相似，在使用 `:visual` 命令离开 Ex 模式前，可以一次执行多条命令。

# Vim 即语言

Vim最成功的闪光点莫过于一旦你开始使用它，它就会让你欲罢不能。Vim就像语言一样，拥有名词、动词、副词等属性。

## 动词

>所谓动词指的是我们执行的动作，这些动作可以施加在名词之上。可以看看下面几个常见的动作：

-   `d` : 删除
-   `c` : 修改
-   `y` : 拖拉（拷贝）
-   `v` : 可视化选择 (V for line vs. character)

## 修饰语

定语用在名词之前，表明以哪种方式来执行动作。几个例子：

-   `i` : 内部
-   `a` : 周围
-   `NUM` : 数字 (e.g.: 1, 2, 10)
-   `t` : 查找到指定字符，并跳转到这个字符的前面
-   `f` : 查找到指定字符，并跳转到字符所处的位置
-   `/` : 查找字符串 (literal or regex)

## 名词

在英语中，名词用来表示你所操作的对象。它们都是客体。在vim中也是这样。下面列出vim中的名词：

-   `w` : 单词
-   `s` : 句子
-   `)` : 句子 (另一种操作方式)
-   `p` : 段落
-   `}` : 段落 (另一种操作方式)
-   `t` : 标签 ( HTML/XML)
-   `b` : 块 (编程语言)

## 快速体验

现在我们有句子的不同组成部分，该怎样将这几部分组成完整的句子呢？

就像英语一样，将动词、修饰语和名词排列组合起来。

删除两个单词:
```vim
d2w
```
删除--d,两个--2,单词--w。

修改所在的句子（删除当前句子并进入插入模式）
```vim
cis
```
修改--c,所在的(内部的)-- i,句子--s。

拷贝当前所在的段落：
```vim
yip
```
拷贝--y,当前所在的--i,段落--p。

# 正式入门

## 创建及保存

- 创建新文件

```shell
vim [文件名]（有则打开，没有则自动创建并打开）
```

例如：
```shell
vim text
```

显示：
```shell
[] # 光标显示当前所在位置，当前不可编辑
~  # "～" 表示空白无内容                                                                             
~                                                                               

~                                                                                  

~                                                                               

~ 
"text" 0L, 0B # "text"表示文件名；0L表示0行； 0B表示文件大小
```

-   切换到插入模式

```shell
i
```

显示：
```shell
hello world![] # 光标显示当前所在位置，当前可编辑
~  # "～" 表示空白无内容                                                                             
~                                                                               

~                                                                                  

~                                                                               

~ 
-- INSERT --
```

编辑完毕后，按下 ``Esc`` 这个按钮即可！同时左下角的 ``– INSERT – ``消失。

按下 ``Esc`` 后，接着 ``:wq``保存并退出：
```vim
:wq
```

这样我们就成功创建了一个 text.txt 的文件。

## Vim导航

>在普通模式下，可使用以下按键实现游标移动

### 基础导航

| **编号** | **命令** | **描述**          |
|:---:|:---:|:-----------:|
| 1  | h  | 将光标向左移动一个位置 |
| 2  | l  | 将光标向右移动一个位置 |
| 3  | k  | 将光标向上移动一行   |
| 4  | j  | 将光标向下移动一行   |

比如要执行多位置导航，要从当前行导航下方的光标`10`行，请执行以下命令 

```shell
10j
```

### 进阶导航

| **编号** | **命令**        | **描述**           |
|:---:|:---------:|:------------|
| 1  | 0         | 将光标移动到当前行的开头 |
| 2  | $         | 将光标移动到当前行的末尾 |
| 3  | Ctrl \+ f | 向下滚动整个页面     |
| 4  | Ctrl \+ b | 向上滚动整个页面     |

以下命令可用于导航到特定行:

 **编号** | **命令** | **描述** 
:---:|:---:|:---
 1 | :n | 跳到第n行 
 2 | :0 | 跳转到文件的开头 
 3 | :$ | 跳到文件末尾 

### 单词导航

可以使用以下命令进行单词导航

| **编号** | **命令** | **描述** |
|:---:|:---:|:---|
| 1 | w | 将光标移动到下一个单词的开头 |
| 2 | e | 将光标移动到当前单词的末尾 |
| 3 | b | 将光标移动到上一个单词的开头 |

此外，Vim使用跳转列表跟踪导航，可以在该列表中前后移动。

| **编号** | **命令** | **描述** |
|:---:|:---:|:---:|
| 1 | Ctrl \+ o | 跳回上一个位置 |
| 2 | Ctrl \+ i | 跳到下一个位置 |

## Vim 文档编辑

### 缓冲

缓冲区是Vim使用的临时内存。 当在编辑器中打开文件时，Vim从磁盘驱动器加载其内容。 每当编辑文件时，这些内容都存储在内存(RAM)中，实际上是从**缓冲区**编辑文件。 当完成编辑并保存文件，那时只将缓冲区内容传输到适当的文件。

### 交换

交换区域是由Vim创建的文件，用于定期存储缓冲区内容。 编辑文件时，由于任何原因，更改可能会丢失，而Vim提供交换文件以提供数据恢复。

### 剪切，复制和粘贴操作

经常对文本执行剪切，复制和粘贴操作。 Vim提供以下命令来执行这些操作(`y`代表`yank`，`p`代表粘贴动作)

| **编号** | **命令** | **描述** |
|:---:|:---:|:---|
| 1 | x | 从光标位置删除字符 |
| 2 | X | 从光标位置删除前一个字符 |
| 3 | y | 从光标位置复制单个字符 |
| 4 | p(小写) | 光标位置后粘贴字符 |
| 5 | P(大写) | 粘贴光标位置前的字符 |

### 多位置命令

| **编号** | **命令** | **描述** |
|:---:|:---:|:---:|
| 1 | dw | 从光标位置删除单词 |
| 2 | D | 从光标位置删除整行 |
| 3 | dd | 删除整行 |
| 4 | Y | 复制整行 |
| 5 | yy | 复制整行 |

### 撤消

执行一次撤消操作执行 

```shell
u
```

要执行多个撤消操作，请使用具有相同命令的数字。 例如，下面的命令将撤消最后`3`个动作 

```shell
3u
```

撤消所有执行以下命令 

```shell
U
```

### 重做

redo，即撤销 undo 的操作

```shell
Ctrl + r
```

## Vim搜索及替换

### 搜索相关设置

要执行增量搜索，请执行以下命令 

```shell
:set incsearch
```

要突出显示搜索执行以下命令 

```shell
:set hlsearch
```

此外，若要禁用增量的搜索设置，执行以下命令 

```shell
:set noincsearch
```

禁用突出显示的搜索设置，执行以下命令 

```shell
:set nohlsearch
```

### 在当前文件中搜索

#### 向前搜索

<table>
<thead>
<tr>
<th>编号</th>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>/&lt;expression&gt;</code></td>
<td>向前搜索表达式</td>
</tr>
<tr>
<td>2</td>
<td><code>n</code></td>
<td>查找下一个事件。这是相同的，然后找到文本</td>
</tr>
<tr>
<td>3</td>
<td><code>N</code></td>
<td>查找上一次出现。 这与之前的查找相同</td>
</tr>
<tr>
<td>4</td>
<td><code>//</code></td>
<td>重复之前的前向搜索</td>
</tr>
</tbody>
</table>

#### 向后搜索

<table>
<thead>
<tr>
<th>编号</th>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>?&lt;expression&gt;</code></td>
<td>向后搜索表达式</td>
</tr>
<tr>
<td>2</td>
<td><code>n</code></td>
<td>查找上一次出现。 这是相同的，并找到之前的文本内容</td>
</tr>
<tr>
<td>3</td>
<td><code>N</code></td>
<td>查找下一个事件。这和下一个查找相同</td>
</tr>
<tr>
<td>4</td>
<td><code>??</code></td>
<td>重复上一个向后搜索</td>
</tr>
</tbody>
</table>

#### 在光标下搜索

将光标放在任何单词下并执行以下命令以执行搜索操作

| **编号** | **命令** | **描述** |
|:---:|:---:|:---:|
| 1 | \* | 搜索下一个当前单词 |
| 2 | \# | 搜索以前出现的当前单词 |


### 在多个文件中搜索

使用 `vimgrep` 命令，可以在多个文件中搜索 `<expression>` 。 

例如，下面的命令在所有文本文件中搜索字符串 - `Python`：
```shell
:vimgrep Python *.txt
```

请注意，要转到下一个和上一个匹配项，必须使用以下命令

 **编号** | **命令** | **描述** 
---|---|---
 1 | :cn | 转到下一个表达式 
 2 | :cN | 转到上一个表达式 

### 替换和撤销

替换和 Undo 命令都是针对普通模式下的操作：

 **命令**     | **说明**                 
:----------:|:----------------------:
 r\+<待替换字母> | 将游标所在字母替换为指定字母         
 R          | 连续替换，直到按下 Esc          
 cc         | 替换整行，即删除游标所在行，并进入插入模式  
 cw         | 替换一个单词，即删除一个单词，并进入插入模式 
 C\(大写\)    | 替换游标以后至行末              
 ~          | 反转游标所在字母大小写            
 \{n\}u     | 撤销一次或 n 次操作            
 U\(大写\)    | 撤销当前行的所有修改             
 Ctrl\+r    | redo，即撤销 undo 的操作      

### 快速缩进

使用以下命令进行快速调整缩进操作

<table>
    <tr>
        <td>命令</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>&gt;&gt;</td>
        <td>整行将向右缩进</td>
    </tr>
    <tr>
        <td>&lt;&lt;</td>
        <td>整行向左回退</td>
    </tr>
</table>

#### 调整文本位置

命令行模式下输入 `:ce`(center)命令使本行内容居中：

```bash
:ce
```

命令行模式下输入 `:ri`(right)命令使本行文本靠右：

```bash
:ri
```

命令行模式下输入 `le`(left)命令使本行内容靠左：

```bash
:le
```

## vim 高级功能

### 多事件

#### 多文件

>假设正在编辑文件，并且想要在同一个Vim会话中打开另一个文件。在这种情况下，可以使用Vim的编辑命令。

<table>
    <tr>
        <td>编号</td>
        <td>命令</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>1</td>
        <td>:e</td>
        <td>在缓冲区中加载新文件以进行编辑</td>
    </tr>
    <tr>
        <td>2</td>
        <td>:edit</td>
        <td>与:e功能相同</td>
    </tr>
    <tr>
        <td>3</td>
        <td>:e &lt;tab&gt;</td>
        <td>列出要从当前目录编辑的文件</td>
    </tr>
    <tr>
        <td>4</td>
        <td>:edit &lt;tab&gt;</td>
        <td>与:e &lt;tab&gt;功能相同</td>
    </tr>
</table>

-   命令行模式下输入`:e 3.txt` 打开新文件 3.txt
```vim
:e 3.txt
```

-   命令行模式下输入`:e#` 回到前一个文件
```vim
:e#
```

-   命令行模式下输入`:ls`可以列出以前编辑过的文档
```vim
:ls
```

#### 多缓冲区

>Vim支持多个缓冲区

<table>
<thead>
<tr>
<th>编号</th>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>:badd &lt;file&gt;</code></td>
<td>将文件添加到新缓冲区</td>
</tr>
<tr>
<td>2</td>
<td><code>:bN</code></td>
<td>切换到第<code>N</code>个缓冲区。 例如，切换到第<code>3</code>缓冲区使用<code>:b3</code></td>
</tr>
<tr>
<td>3</td>
<td><code>:bnext</code></td>
<td>移动到缓冲区列表中的下一个缓冲区</td>
</tr>
<tr>
<td>4</td>
<td><code>:bprevious</code></td>
<td>移动到缓冲区列表中的上一个缓冲区</td>
</tr>
<tr>
<td>5</td>
<td><code>:buffers</code></td>
<td>列出所有缓冲区</td>
</tr>
<tr>
<td>6</td>
<td><code>:bfirst</code></td>
<td>移动到第一个缓冲区</td>
</tr>
<tr>
<td>7</td>
<td><code>:blast</code></td>
<td>移动到最后一个缓冲区</td>
</tr>
<tr>
<td>8</td>
<td><code>:ball</code></td>
<td>加载所有缓冲区</td>
</tr>
</tbody>
</table>

-   命令行模式下输入`:b 2.txt`（或者编号）可以直接进入文件 2.txt 编辑
```vim
:b 2.txt
```

-   命令行模式下输入`:bd 2.txt`（或者编号）可以删除以前编辑过的列表中的文件项目
```vim
:bd 2.txt
```

-   命令行模式下输入`:e! 4.txt`，新打开文件 4.txt，放弃正在编辑的文件
```vim
:e! 4.txt
```

-   命令行模式下输入`:f` 显示正在编辑的文件名
```vim
:f
```

-   命令行模式下输入`:f new.txt`，改变正在编辑的文件名字为 new.txt
```vim
:f new.txt
```

#### 多个标签

>Vim 7.0开始引入了多标签页（Tabs）概念，用于同时编辑多个文件，每一个标签页也可以包含多个缓冲区或窗口。标签页的特殊之处在于，通常只影响当前标签页中的缓冲区和窗口。

<table>
    <tr>
        <td>编号</td>
        <td>命令</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>1</td>
        <td>:tabnew</td>
        <td>打开新标签页</td>
    </tr>
    <tr>
        <td>2</td>
        <td>:tabnew &lt;file&gt;</td>
        <td>在标签中打开新文件</td>
    </tr>
    <tr>
        <td>3</td>
        <td>:tabclose</td>
        <td>关闭当前标签</td>
    </tr>
    <tr>
        <td>4</td>
        <td>:tabnext</td>
        <td>移至下一个标签</td>
    </tr>
    <tr>
        <td>5</td>
        <td>:tabprevious</td>
        <td>移至上一个标签</td>
    </tr>
    <tr>
        <td>6</td>
        <td>:tabfirst</td>
        <td>移至第一个标签</td>
    </tr>
    <tr>
        <td>7</td>
        <td>:tablast</td>
        <td>移至最后一个标签</td>
    </tr>
</table>

#### 多个窗口

在Vim中，可以使用以下命令创建新窗口

<table>
<thead>
<tr>
<th>编号</th>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>:new &lt;file&gt;</code></td>
<td>打开新窗口</td>
</tr>
<tr>
<td>2</td>
<td><code>:new &lt;file&gt;</code></td>
<td>在新窗口中打开文件</td>
</tr>
</tbody>
</table>

##### 视窗操作简介

>vim 可以在一个界面里打开多个窗口进行编辑，这些编辑窗口称为 vim 的视窗。 打开方法有很多种，例如可以使用在命令行模式下输入 `:new` 打开一个新的 vim 视窗，并进入视窗编辑一个新文件（普通模式下输入 `Ctrl+w` 也可以）。

##### 分屏操作

| **命令 / 快捷键** | **效果** |
|:---|:---:|
| ：new | 创建空白分屏 |
| ：sp\+fname | 水平分屏（split）打开fname文件 |
| ：vs\+fname | 垂直分屏（vertical split）打开fname文件 |
| \[CTRL\] \[W\] s | 水平打开当前文件 |
| \[CTRL\] \[W\] v | 垂直打开当前文件 |

##### 分屏调整

| **命令（快捷键）** | **说明** |
|:---:|:---:|
| \[CTRL\] \[W\] \+ | 扩大窗口 |
| \[CTRL\] \[W\] \- | 缩小窗口 |
| \[CTRL\] \[W\] h | 跳转到左边的窗口 |
| \[CTRL\] \[W\] j | 跳转到下边的窗口 |
| \[CTRL\] \[W\] k | 跳转到上边的窗口 |
| \[CTRL\] \[W\] l | 跳转到右边的窗口 |
| \[CTRL\] \[W\] t | 跳转到最顶上的窗口 |
| \[CTRL\] \[W\] b | 跳转到最顶下的窗口 |
| \[CTRL\] \[W\] w | 切换不同分屏 |
| :res\(ize\) num | :res 5，显示行数调整为5行 |
| :res\(ize\)\+num | 把当前窗口高度增加num行 |
| :res\(ize\)\-num | 把当前窗口高度减少num行 |
| :vertical res\(ize\) num | 指定当前窗口为num列 |
| :vertical res\(ize\)\+num | 把当前窗口增加num列 |
| :vertical res\(ize\)\-num | 把当前窗口减少num列 |
| :f filename | 给窗口重命名 |
| :ls | 列出打开的文件 |
| bn | 显示第n个文件 |
| :bp | 显示下一个文件 |
| :shell | 可以在不关闭vi的情况下切换到shell命令行 |
| :exit | 从shell回到vi |

##### 关闭分屏

| **命令（快捷键）** | **说明** |
|:---:|:---:|
| :q\! / :w\! / :x | 关闭窗口 |
| \[CTRL\] \[W\] q | 关闭窗口 |
| :c | 暂时关闭窗口，其内容还在缓存中 |
| \[CTRL\] \[W\] c | 关闭窗口，不能关闭最后一个 |
| :tabc | 关闭当前窗口 |
| :tabo | 关闭所有窗口 |

1. 打开多个窗口

viｍ的多窗口是动态的，可以开始编辑时就打开多窗口，也可以工作时随时增加新窗口，或者删除一个窗口

```shell
vim  -o  file1 file2  打开一个编辑会话，显示为水平分割成两半的窗口，一个文件占用一个窗口。
```
(打开一个编辑会话，显示为水平分割成两半的窗口，一个文件占用一个窗口)

```shell
vim  -O  file1 file2
```
(和上面相同，不过是垂直分割两半的窗口)

-o后面加一个数字n，是预分配窗口的形式打开：
```shell
vim  -o5 file1  file2   将分配5个相同的窗口，有3个是闲置的
```

横向切割窗口:
```shell
:new file1 
```

```shell
:sp file2
```

纵向切割窗口名:
```shell
:sp filename
```

2. 关闭多窗口

>可以用：q!，也可以使用：close，最后一个窗口不能使用close关闭，使用close只是暂时关闭窗口，其内容还在缓存中，只有使用q!、w!或x才能真能退出。

关闭当前窗口:
```shell
:tabc
```

关闭所有窗口:
```shell
:tabo
```

3. 给窗口重命名
```shell
:f file
```

4. vi与shell切换
```shell
:shell
```
(可以在不关闭vi的情况下切换到shell命令行)

```shell
:exit
```
(从shell回到vi)

### 书签标记

#### 创建书签

创建书签执行以下命令 

```shell
m[bookmark-name]
```

在上面的示例中，书签名称是单个字母字符。例如，下面的命令创建名称`a`的书签。

```shell
ma
```

#### 跳转到书签

当创建了书签以后，就可以跳转到指定书签位置

 **编号** | **命令**               | **描述**                   
:------:|:--------------------:|:------------------------:
 1      | \`\{bookmark\-name\} | 移动到书签的确切位置。 请注意，此字符为后退引号 
 2      | ‘\{bookmark\-name\}  | 跳到书签行的开头。 请注意，这个字符是单引号   

#### 列出所有书签

```shell
:marks
```

#### 删除书签

删除书签

```shell
:delmarks [bookmark-name]
```

例如，下面的命令删除名称为`a`的书签。

```shell
:delmarks a
```

### Vim宏

#### 开始录制

要开始录制，请按`q`，然后按任何小写字母作为宏名称。

```shell
qa
```
q--开始录制，a--此次宏录制名称（任意）

#### 执行Vim操作

在此步骤中，可以执行任何Vim操作，例如:剪切，复制，删除，替换等。

#### 查看Vim操作

可以通过执行以下命令来查看这些操作。

```shell
:reg
```

#### 停止录制

完成操作后，再次按`q`停止录制。
```shell
q
```

#### 播放录制

```shell
@[macro-name]
```

例如，执行宏`a`，执行以下命令:
```shell
@a
```

### Vim寄存器

>寄存表示的是存放，其中有一个临时的存放的意思，器表示容器。
>
>存放的是vim内的复制黏贴的内容，系统剪切板的内容，总的来说，寄存器就是一个可自定义的多重剪切板。

**vim共有9类寄存器：**

<table>
    <thead>
        <tr>
            <td>编号</td>
            <td>命令（快捷键）</td>
            <td>说明</td>
            <td></td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>未命名寄存器</td>
            <td>"</td>
            <td>上一次复制或删除的文本</td>
        </tr>
        <tr>
            <td>2</td>
            <td>数字寄存器</td>
            <td>0-9</td>
            <td>文本复制和删除历史</td>
        </tr>
        <tr>
            <td>3</td>
            <td>行内删除寄存器</td>
            <td>-(减号)</td>
            <td>删除少于一行的文本</td>
        </tr>
        <tr>
            <td>4</td>
            <td>命名寄存器</td>
            <td>a-z，A-Z</td>
            <td>存放文本</td>
        </tr>
        <tr>
            <td rowspan="3">5</td>
            <td>只读寄存器</td>
            <td>%</td>
            <td>当前文件名</td>
        </tr>
        <tr>
            <td>只读寄存器</td>
            <td>.</td>
            <td>最近插入的文本</td>
        </tr>
        <tr>
            <td>只读寄存器</td>
            <td>:</td>
            <td>最近执行的命令行</td>
        </tr>
        <tr>
            <td>6</td>
            <td>轮换缓冲区寄存器</td>
            <td>#</td>
            <td>交替文件的名字</td>
        </tr>
        <tr>
            <td>7</td>
            <td>表达式寄存器</td>
            <td>=</td>
            <td>返回表达式结果</td>
        </tr>
        <tr>
            <td rowspan="3">8</td>
            <td>选择和拖拽寄存器</td>
            <td>*</td>
            <td>系统剪切板</td>
        </tr>
        <tr>
            <td>选择和拖拽寄存器</td>
            <td>+</td>
            <td>系统剪切板(X11)</td>
        </tr>
        <tr>
            <td>选择和拖拽寄存器</td>
            <td>~</td>
            <td>拖拽的文本</td>
        </tr>
        <tr>
            <td>9</td>
            <td>黑洞寄存器</td>
            <td>_(下划线)</td>
            <td>彻底删除的文本</td>
        </tr>
        <tr>
            <td>10</td>
            <td>搜索模式寄存器</td>
            <td>/</td>
            <td>最近搜索模式</td>
        </tr>
    </tbody>
</table>

**以上命令在 vim 普通模式下，需在前加 ``"`` (英文状态下的引号)使用。**

1. **未命名寄存器（The Unnamed Register）** 

当使用y命令复制文本，或使用d、c、s、x等命令删除文本时，文本将自动被放入``""`` 未命名寄存器。

2. **数字寄存器（The Numbered Registers）** 

``"0``  包含最近复制的文本，实时刷新。

数字寄存器``"1``、``"2``、``"3``、``"4``、····``"9``可以看作是删除历史， 你可以从中找到早先删除的文本。比如使用了三次`dd`命令，那么这三行文本被分别存放在寄存器1,2,3中，可以通过命令`"1P`,`"2P`,`"3P`将这些文本再粘贴回来。

3. **行内删除寄存器（The Small Delete Register）** 

当删除文本少于一行时，内容将被放入``"-`` 寄存器，除非指定了其它寄存器。

4. **命名寄存器（The Named Registers）** 

当文本被放入以小写字母命名的寄存器（例如 ``"a`` ）时，该寄存器原有的内容将被覆盖；

而使用以大写字母命名的寄存器（例如 ``"A`` ）时，将会把文本追加到原有内容之后。

5. **只读寄存器（The Read-Only Registers）** 

只能从只读寄存器中读取并粘贴内容，而不能写入。

``"%`` 包含当前文件名；``".`` 包含最近插入的文本；``":`` 包含最近执行的命令行。

6. **轮换缓冲区寄存器（Alternate buffer register）**

交替文件寄存器 `"#`  存储着当前 Vim 窗口（Window）的交替文件。而**交替文件**（alternate file）是指缓存中的上一个文件，可通过 `Ctrl+^` 来切换上一文件与当前文件。

7. 表达式寄存器

表达式寄存器 `"=` 主要用于计算 Vim 脚本的返回值，并插入到文本中。 

当我们键入 `"=` 后光标会移动到命令行，此时我们可以输入任何 Vim 脚本的表达式。 

例如 `3+2`，按下回车并且 `p` 则会得到 `5`，这在我们调试 Vim 脚本时非常有用，比如调用一个函数看它是否有正确的返回值。

8. 选择和拖拽寄存器

选择和拖放寄存器包括 `"*`, `"+`, 和 `"~`，这三个寄存器的行为是和 GUI 相关的。

`"*` 和 `"+` 在 Mac 和 Windows 中，都是指系统剪切板（clipboard），例如 `"*yy` 即可复制当前行到剪切板。 以供其他程序中粘贴。其他程序中复制的内容也会被存储到这两个寄存器中。 

而在 X11 系统中（绝大多数带有桌面环境的 Linux 发行版），`"*` 和 `"+` 这二者是有区别的：
-   `"*` 指 X11 中的 PRIMARY 选区，即鼠标选中区域。在桌面系统中可按鼠标中键粘贴。
-   `"+` 指 X11 中的 CLIPBOARD 选区，即系统剪切板。在桌面系统中可按 Ctrl+V 粘贴。

9. 黑洞寄存器

黑洞寄存器 `"_`，所有删除或拷贝到黑洞寄存器的文本将会消失。

这是为了在删除文本的同时不影响任何寄存器的值，`"_` 通常用于 Vim 脚本中。

10. 搜索寄存器

搜索寄存器 `"/` 用于存储上一次搜索的关键词。Vim 中如何进行搜索呢？ 在普通模式下按下 `/` 即进入 search 模式，输入关键字并按下回车即可。

该寄存器是可写的，例如 `:let @/ = "harttle"` 将会把 `"harttle"` 写入该寄存器。 下次搜索时不输入搜索词直接回车便会搜索 `"harttle"`。

### Vim折页

>当文件内容为大文本时，折叠功能将非常有用。使用此功能，只能显示选定的文件部分。 在使用编程语言时，此功能特别有用。

#### 折叠激活和停用

激活折叠，使用以下命令 

```shell
:set foldenable 
```

```shell
:set foldmethod = indent
```

要停用折叠，请使用以下命令

```shell
:set nofoldenable
```

#### 折页操作

打开折页: 
```shell
zo
```

关闭折页:
```shell
zc
```

关闭所有折叠:
```shell
zM
```

展开所有折叠:
```shell
zR
```

### Vim diff命令

#### 显示差异

```shell
vim –d [文件1] [文件2]
```

#### 激活和停用diff模式

在 vim 普通模式中并且已经打开了【文件1】，想要比较【文件2】的差异

水平分割：
```shell
:diffsplit [文件2]
```

垂直分割：
```shell
:vert diffsplit [文件2]
```

#### 以差异模式导航

差异模式下的导航略有不同。 例如，当从一个窗口滚动文本时，相邻窗口中的文本也会滚动。 这称为`scrollbind`。 

启用此功能：
```shell
:set scrollbind
```

禁用此功能：
```shell
:set noscrollbind
```

编辑文件后，想再次对比差异，请使用以下命令更新差异：
```shell
:diffupdate
```

在差异窗口之间切换，执行以下命令：
```shell
Ctrl + w Ctrl + w
```
（注意，必须按``Ctrl + w``  2次！）

在`diff`窗口中，执行以下命令，跳转到上一个更改 ：
```shell
[c
```

在`diff`窗口中，执行以下命令，跳转到下一个更改：
```shell
]c
```

#### 从差异窗口应用更改

要将相邻差异窗口的更改应用于当前差异窗口，执行以下命令：
```shell
:diffget
```

将更改从当前差异窗口应用到相邻的差异窗口，执行命令：
```shell
:diffput
```

# Vim官方文档

可以从以下网站访问Vim的官方文档
-   [https://www.vim.org/](https://www.vim.org/)

# 彩蛋

## 创建加密文档

```bash
vim -x [文件名]
```

输入您的密码，确认密码，这样在下一次打开时，vim 就会要求你输入密码。

## 在 vim 执行外部命令

在命令行模式中输入 `!` 可以执行外部的 shell 命令。

-   `:!ls` 用于显示当前目录的内容

-   `:!rm FILENAME` 用于删除名为 FILENAME 的文件

-   `:w FILENAME` 可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件

