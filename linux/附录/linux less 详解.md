# 简介

 `less` 取自一句名人名言：`less is more`，这句名言已经哲学化了。

`less` 是 `more` 的增强版本，它具有更全面的全文件导航能力，以及全文搜索能力。`less` 在大文件打开方面有很好的优化，在即时显示、快速加载等方面性能突出。`less` 还支持一次性打开多个文件，它将会逐一地显示这些文件的内容。

# 基本用法

less 的基本使用方法有两种：

1. 打开一个或多个文件：
```shell
less /var/log/message
```

2. 作为管道操作的末端：
```shell
ps aux|less
```

- 在管理操作时，可能会常常用到 `tail -f` 等价的实时刷新模式：
```shell
dmsg|less +F
```

# 阅读界面操作

在 less 显示的阅读界面中，按键即命令。

常用的按键命令：
| **按键**      | **指令**                                                      |
|:-----------:|:-----------------------------------------------------------:|
| SPACE       | 下一页                                                         |
| d           | 下半页                                                         |
| b           | 前一页                                                         |
| u           | 前半页                                                         |
| v           | 编辑内容                                                        |
| j 或 ↵ Enter | 下ㄧ行                                                         |
| k           | 前ㄧ行                                                         |
| Home        | 文件顶部                                                        |
| End         | 文件结尾                                                        |
| F           | 跟随模式（供日志使用）。Follow Mode \(for logs\)\. Interrupt to abort\. |
| g 或 <       | 第一行                                                         |
| G 或 >       | 最后ㄧ行                                                        |
| ⟨n⟩G        | 跳到第⟨n⟩行                                                     |
| /⟨text⟩     | 向前搜索⟨text⟩。文字会被视为正则表达式。                                     |
| ?⟨text⟩     | 如同/，但为向后搜索。                                                 |
| n           | 下一个符合的搜索结果                                                  |
| N           | 上一个符合的搜索结果                                                  |
| Escu        | 关闭符合突显（请见\-g命令行选项）                                          |
| \-⟨c⟩       | 切换选项⟨c⟩，例如\-i会切换是否要在搜索时忽略大小写                                |
| m⟨c⟩        | 设置标记⟨c⟩                                                     |
| '⟨c⟩        | 跳到标记⟨c⟩                                                     |
| = 或 Ctrl\+G | 文件信息                                                        |
| :n          | 下一个文件                                                       |
| :p          | 上一个文件                                                       |
| h           | 说明。这会使用less显示，q离开。                                          |
| q           | 离开                                                          |

# 文档内容搜索

在 less 的阅读界面中，底部行被称作状态命令行。如果你在界面中按键，则该行的状态提示暂时被隐藏，带有 `:` 提示符的命令行输入会被显示。

当你按下 `/` 进入搜索状态时，状态命令行等待你继续键入 pattern。

你可以在搜索时使用正则式 pattern。

# 标记（Mark）

标记是一个字母，大小写敏感。

在阅读界面按下 `m` 按键序列，此命令将会为你的当前阅读位置建立一个名为 `a` 的标记。稍后你可以使用 `'a` 返回到这个位置。

如果你键入 `-J` 序列，那么阅读界面左侧将显示一列垂直的状态栏，而 `a` 标记在这个状态栏中会有显示。

# 选项

选项既可以从命令行指定，也可以在 less 阅读界面中通过前缀字符序列 `-` 或 `--` 直接键入和进行翻转。

`less` 命令允许从命令行直接键入命令，使用 `+` 前缀即可，所以 `+F` 代表着进入滚动刷新模式，例如：

```shell
less +F /var/log/messages
```

注意你仍然可以使用 less 的命令行专有的选项，例如 `-F` 代表着文件内容不够一屏时立即退出 less。

如果你使用了 `++` 前缀，那么该命令将会被自动应用到每一个文件。

> `less` 可以一次性打开多个文件并依次显示。

# 主要的命令行选项

```shell
-?........-显示帮助(从命令行)

-a……..-搜索跳过当前屏幕

-A……..-从目标行后开始搜索

-d……..-静音，不响铃

-e / -E….-在文件结尾退出

-f........-强制打开非常规文件

-F........-如果整个文件适合第一个屏幕，则退出

-g........-仅突出显示搜索的最后一个匹配项

-G........-不要突出显示任何匹配的搜索 

-I……..-在所有搜索中忽略大小写

-m -M....-设置提示样式

-n / -N….-显示/不显示行号,行号被显示在状态命令行中

-o[文件]-……复制到日志文件(仅标准输入)

-O[文件]-……… 复制到日志文件(无条件覆盖) 

-p[模式匹配] -……….从模式匹配字符开始(从命令行)

-r -R....-输出“原始”控制字符

-S……..-截断(截断)长句行，而不是换行

-V........-显示版本号

-w........-突出显示前进屏幕后的第一个新行 

-W........-向前移动后突出显示第一个新行
```

# 键盘快捷键

>在手册页阅读界面中，可以使用快捷键来帮助阅读。
>
>由于手册页的显示是使用操作系统 Shell 环境中的默认 PAGER 来完成的，所以快捷键遵循相应 PAGER 的功能映射。
>
大多数系统中现在默认采用 `less` 作为默认 PAGER，因此下面介绍 `less` 快捷键，但针对 manpage 修正描述文字。

1. 全屏导航

-   ctrl + F - 向前移动一屏
-   ctrl + B - 向后移动一屏
-   ctrl + D - 向前移动半屏
-   ctrl + U - 向后移动半屏

2. 单行导航

-   j - 下一行
-   k - 上一行

3. 其它导航

-   G - 移动到最后一行
-   g - 移动到第一行
-   q / ZZ - 退出 less 命令

4. 其它有用的命令

-   v - 使用配置的编辑器编辑当前文件
-   h - 显示 less 的帮助文档
-   &pattern - 仅显示匹配模式的行，而不是整个文件

5. 标记导航

>》当使用 less 查看大文件时，可以在任何一个位置作标记，可以通过命令导航到标有特定标记的文本位置。
-   ma - 使用 a 标记文本的当前位置
-   'a - 导航到标记 a 处